<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SunnySight - AI Repo Analyzer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div>
          <h1>ğŸš€ SunnySight</h1>
          <p class="subtitle">AI-Powered Repository Analysis</p>
        </div>
        <div class="header-actions">
          <button id="history-btn" class="btn-header" title="Analysis History">ğŸ“œ</button>
          <button id="settings-btn-header" class="btn-header" title="Settings">âš™ï¸</button>
        </div>
      </div>
    </header>

    <!-- History Dropdown -->
    <div id="history-dropdown" class="history-dropdown" style="display: none;">
      <div class="history-header">
        <h3>Recent Analyses</h3>
        <button id="history-close" class="btn-close">Ã—</button>
      </div>
      <div id="history-list" class="history-list">
        <p class="empty-state">No analysis history yet</p>
      </div>
    </div>
    
    <div id="loading" class="loading">
      <div class="spinner"></div>
      <p id="loading-message">Analyzing repository...</p>
      <p class="loading-detail" id="loading-detail">This may take 10-20 seconds</p>
      <div class="progress-bar-container">
        <div id="progress-bar" class="progress-bar"></div>
      </div>
    </div>

    <div id="error" class="error" style="display: none;">
      <p class="error-icon">âŒ</p>
      <p class="error-title">Unable to analyze repository</p>
      <p class="error-message"></p>
      <button id="settings-btn" class="btn-settings">âš™ï¸ Open Settings</button>
    </div>

    <div id="content" class="content" style="display: none;">
      <!-- Settings Warning -->
      <div id="settings-warning" class="settings-warning" style="display: none;">
        <p>âš ï¸ API keys not configured</p>
        <button id="settings-btn-inline" class="btn-settings-small">Configure</button>
      </div>

      <!-- Cached Badge -->
      <div id="cached-badge" class="cached-badge" style="display: none;">
        <span>ğŸ’¾ Cached Result</span>
        <button id="refresh-btn" class="btn-refresh">ğŸ”„ Refresh</button>
      </div>

      <!-- Feature 1: AI Repo Summary -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ“‹ Repository Summary</h2>
          <button id="copy-summary-btn" class="btn-copy-small" title="Copy summary">ğŸ“‹</button>
        </div>
        <div class="feature-content">
          <p id="repo-summary" class="summary-text">-</p>
        </div>
      </section>

      <!-- Feature 2: Key File Highlighter -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ”‘ Key Files</h2>
        </div>
        <div class="feature-content">
          <div id="key-files" class="key-files-list">
            <p class="empty-state">Analyzing key files...</p>
          </div>
        </div>
      </section>

      <!-- Feature 3: Architecture / Pipeline Explanation -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ—ï¸ Architecture & Pipeline</h2>
          <button id="architecture-ui-btn" class="btn-a2ui" title="Show Details">Show Details</button>
        </div>
        <div class="feature-content">
          <p id="pipeline-explanation" class="pipeline-text">-</p>
        </div>
      </section>

      <!-- Feature 4: Smart Use-Case Recommendations -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ’¡ Use Cases</h2>
          <button id="usecases-ui-btn" class="btn-a2ui" title="Show Details">Show Details</button>
        </div>
        <div class="feature-content">
          <ul id="use-cases" class="use-cases-list">
            <li class="empty-state">Analyzing use cases...</li>
          </ul>
        </div>
      </section>

      <!-- Feature 5: Dependency & Environment Auditor -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ“¦ Dependencies & Environment</h2>
          <button id="dependencies-ui-btn" class="btn-a2ui" title="Security">Security</button>
        </div>
        <div class="feature-content">
          <div id="requirements" class="requirements-content">
            <div class="empty-state">Analyzing dependencies...</div>
          </div>
        </div>
      </section>

      <!-- Feature 6: Repo Health Check -->
      <section class="feature-section">
        <div class="feature-header">
          <h2>ğŸ¥ Repository Health</h2>
        </div>
        <div class="feature-content">
          <div id="health-check" class="health-content">
            <div class="empty-state">Analyzing health...</div>
          </div>
        </div>
      </section>

      <!-- Metadata Footer -->
      <div class="metadata-footer">
        <div class="metadata-item">
          <span class="metadata-label">â­ Stars:</span>
          <span id="meta-stars" class="metadata-value">-</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">ğŸ´ Forks:</span>
          <span id="meta-forks" class="metadata-value">-</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">ğŸ’» Language:</span>
          <span id="meta-language" class="metadata-value">-</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label">ğŸ“„ License:</span>
          <span id="meta-license" class="metadata-value">-</span>
        </div>
      </div>

      <div class="actions">
        <a id="repo-link" href="#" target="_blank" class="btn-primary">ğŸ”— View on GitHub</a>
        <button id="export-btn" class="btn-export">ğŸ’¾ Export JSON</button>
        <button id="copy-json-btn" class="btn-copy-json">ğŸ“‹ Copy JSON</button>
        <a href="https://sunnysett.com/github" target="_blank" class="btn-website">ğŸŒ SunnySight</a>
        <button id="settings-btn-footer" class="btn-secondary">âš™ï¸ Settings</button>
      </div>
    </div>

    <!-- Architecture UI View -->
    <div id="architecture-view" class="a2ui-view" style="display: none;">
      <div class="a2ui-header">
        <div>
          <h1>ğŸ—ï¸ Architecture & Pipeline</h1>
          <p class="subtitle">A2UI View</p>
        </div>
        <button id="architecture-back-btn" class="btn-header" title="Back to Main">â† Back</button>
      </div>
      <div class="a2ui-content-container">
        <div id="architecture-content" class="a2ui-content">
          <p class="empty-state">Loading architecture data...</p>
        </div>
      </div>
    </div>

    <!-- Use Cases UI View -->
    <div id="usecases-view" class="a2ui-view" style="display: none;">
      <div class="a2ui-header">
        <div>
          <h1>ğŸ’¡ Use Cases</h1>
          <p class="subtitle">A2UI View</p>
        </div>
        <button id="usecases-back-btn" class="btn-header" title="Back to Main">â† Back</button>
      </div>
      <div class="a2ui-content-container">
        <div id="usecases-content" class="a2ui-content">
          <p class="empty-state">Loading use cases data...</p>
        </div>
      </div>
    </div>

    <!-- Dependencies UI View -->
    <div id="dependencies-view" class="a2ui-view" style="display: none;">
      <div class="a2ui-header">
        <div>
          <h1>ğŸ“¦ Dependencies & Environment</h1>
          <p class="subtitle">A2UI View with Security</p>
        </div>
        <button id="dependencies-back-btn" class="btn-header" title="Back to Main">â† Back</button>
      </div>
      <div class="a2ui-content-container">
        <div id="dependencies-content" class="a2ui-content">
          <p class="empty-state">Loading dependencies data...</p>
        </div>
        <!-- Security Section -->
        <section class="feature-section">
          <div class="feature-header">
            <h2>ğŸ”’ Security Analysis</h2>
          </div>
          <div class="feature-content">
            <div id="security-content" class="a2ui-content">
              <p class="empty-state">Loading security analysis...</p>
            </div>
          </div>
        </section>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast" style="display: none;">
      <span id="toast-message"></span>
    </div>
    </div>
  </div>

  <script src="api.js"></script>
  <script src="analyzer.js"></script>
  <script src="popup.js"></script>
</body>
</html>
